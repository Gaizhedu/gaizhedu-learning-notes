# 第二章
类型、运算符与表达式

本章主要围绕这一部分展开，主要为变量与常量，数据类型之间的转换，运算符等内容

## 变量名
接下来讲讲变量名的格式

相较于Python的宽松，C语言对于变量名的要求变得比较严格

首先变量名只能有字母和数字组成（C11标准后支撑Unicode字符，但说实话正常不会用到），并且第一位必须为字母，而不能为数字，一般来讲下划线`_`是被看作字母的，一般用于比较长的变量名中，增强其可读性

由于库例程（由编程语言的标准库、第三方库或自定义库预先实现的、具备特定功能的函数（或子程序），例如printf()）一般以下划线开头，所以变量名一般不以下划线开头

一般来讲，变量使用的字符为小写字母，而符号常量使用的字母为大写字母（如第一章的MAXLINE）

接下来需要说明一点的事变量名不能与程序内部已有的关键字重复（例如`else`、`if`、`for`等），这些是保留给语言本身用的，这些关键字的字符必须都是小写

一般来讲，选择的变量名要尽可能的表达出这个变量的作用（比如说`line`等），**尽量不要使用抽象的变量名**(如`a`,`b`,`c`)

局部变量一般使用较短的变量名，循环变量（如`for语句`中）要使用较短的变量名，而外部变量使用较长的名字

## 数据类型及长度
C语言里面有一些数据类型：
<table>
    <thead>
        <tr>
            <th>数据类型</th>
            <th>长度</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>char（字符型）</td>
            <td>占用一个字节，存放本地字符集的一个字符</td>
        </tr>
        <tr>
            <td>int（整型）</td>
            <td>通常整型反映了机器中整数的最自然长度</td>
        </tr>
        <tr>
            <td>float（单精度浮点型）</td>
            <td rowspan = "2">可以显示小数点后的位数，这里需要说明一下单精度和双精度的区别，单精度说明这个的精度只能确保到小数点后6~7位，而双精度则可以确保到小数点后15~17位。此外，双精度使用的内存要比单精度要高</td>
        </tr>
        <tr>
            <td>double（双精度浮点型）</td>
        </tr>
    </tbody>
</table>
本地字符集：指当前操作系统、编译器或运行环境默认使用的字符与二进制数据的映射规则，规定了一个字母对应的二进制数据

### 限定符
在声明的时候，还可以在前面加上一些限定符`short`和`long`来限定整型
``` C
short int nums;
long int nums;
```

需要说明的一点是，如果选择上面这种类型的声明，则可以把`int`省略
``` C
short nums;
long nums;
```

接下来来说明这两种有什么不同

`short类型`的长度为16位（大概6.5万个数），而`long类型`长度有32位（大概有43亿个数）

可以看到，`long类型`要远远大于`short类型`

int类型可以为16位或者32位，需要注意的是各个编译器可以根据硬件特性选择合适的长度，但要遵循一定的限制

`short`与`int`至少为**16位**，而`long`至少为**32位**，并且`short`不能长于`int类型`，而`int类型`不得长于`long类型`

接下来将另一个限定符：`signed`和`unsigned`

这两个限定符可以限定`char类型`或者是任何整型：
``` C
unsigned int nums;
```

`signed`限定符范围包括了负数，比如说`signed short`的范围就是 **-32768~32767** 而`unsigned`就是只有正数部分以及0，也就是`0~65535`

这里补充的一点是一般来讲不填就是默认为`signed`（也就是支持正负数），所以一般`signed`可以省略

`unsigned`类型遵循了算数模2^$n$定律，n为该类型占用的位数

> 什么是算数模2的n次方定律？
> 指的是整数在模 2ⁿ（即对 2 的 n 次方取余数）运算下的一系列特殊规律
> 对于任意整数 x，x mod 2ⁿ的结果等价于 x 的二进制表示中最后 n 位所对应的数值。
>
> 举个例子：70 mod 32的计算过程如下
> 70 转换为二进制：1000110
> 32 为2的5次方，所以n为5，取最后五位（00110）
>
> 接下来从右往左看：
> 0 x 1 = 0
> 1 x 2 = 2
> 1 x 4 = 4
> 0 x 8 = 0
> 0 x 16 = 0
>
> 结果为6，所以 70 mod 32 结果为 6

## 常量
接下来讲讲2.3 常量

首先让我们先明白各个常量的表示方法

类似于1 2 3 4 5 6的整数常量属于`int类型`

而`long类型`不同于`int类型`，会在数字的最末尾加一个`l`或者`L`，例如`123123123l`

如果有些数字大到超过了`int类型`，**则归于long类型**，也会在数字的最后面加一个`l`

无符号常量`unsigned`以`u`或者`U`结尾，如果是`unsigned long`，则会以`ul`或者`UL`结尾

接下来是浮点数常量，浮点数常量包含一个小数点或者一个指数（1e-2），当然两者都有也可以

有些浮点数常量没有后缀，被称为`double`类型，如果有`f`或者`F`后缀，则为`float类型`

如果一个浮点数出现了`l`或者`L`后缀，则为`long double`类型

### 进制表示
接下来讲讲进制的表示方法

整形数除了使用十进制外，还可以使用到八进制或者十六进制

其规则可以通过十进制类比：

十进制是满十加一，以此类推八进制就是满八进一，十六进制就是满十六进一

这时候就有人要问了，阿拉伯数字只有10个，怎么表示出16个数字啊

十六进制使用了字母作为后面10~15的表示

例如：A代表10，B代表11，C代表12，D代表13，E代表14，F代表15

接下来利用这个就可以转化数字了

例如说十进制20就是八进制24，十六进制的14

---
讲解完规则会就可以步入正题了

首先第一个，在C语言中，带前缀0的整型常量表示为八进制形式，例如上面的十进制的20就是八进制的024

而十六进制的前缀通常为`0x`或者`0X`，上文的十进制20就是十六进制的0x14

这些常量都可以加上上文提到的后缀`L`或者`U`

### 字符常量
接下来讲讲字符常量，需要说明一点的是，**一个字符常量就是一个整数**，书写的时候一般把一个字符扩在单引号里面

例如`'0'`，这些字符在机器字符集中的数值就是字符常量的值，比如说在ASCII中，`'0'`对应的值为`48`（这个值跟数值的0没关系）

一般来讲，字符常量是与其他字符来比较，当然也可以参加运算（比如说上一章的`c - '0'`）

在一些字符中，可以通过转义来表示字符和字符串常量，比如说换行符`\n`

这些看起来好像是多个字符，但由于**一个字符常量就是一个数**，所以其实是一个字符

另外，反斜杠还有很多用法，比如说可以这样表示一个八进制的数字：`\000`，这里需要注意的是

长度最大就是3位，**不可以超过3位**

另外还有一种表示十六进制的方法是`\xhh`，这里的`h`表示`0~F`的任意一个数

ANSI C语言全部的转义字符序列如下所示：
<table>
    <thead>
        <tr>
            <th>表示</th>
            <th>名称</th>
            <th>表示</th>
            <th>名称</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>\a</td>
            <td>响铃符</td>
            <td>\\</td>
            <td>反斜杠</td>
        </tr>
        <tr>
            <td>\b</td>
            <td>回退符</td>
            <td>\?</td>
            <td>问号</td>
        </tr>
        <tr>
            <td>\f</td>
            <td>换页符</td>
            <td>\'</td>
            <td>单引号</td>
        </tr>
        <tr>
            <td>\n</td>
            <td>换行符</td>
            <td>\"</td>
            <td>双引号</td>
        </tr>
        <tr>
            <td>\r</td>
            <td>回车符</td>
            <td>\000</td>
            <td>八进制数</td>
        </tr>
        <tr>
            <td>\t</td>
            <td>横向制表符</td>
            <td>\xhh</td>
            <td>十六进制数</td>
        </tr>
        <tr>
            <td>\v</td>
            <td>纵向制表符</td>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>

字符常量`'0'`表示属性为0的字符，也就是空字符`null`，通常用`'\0'`来代替0

### 常量表达式
常量表达式是仅仅包含常量的表达式，这种表达式在编译的时候就会求值（比如说20 + 30、123）

这种表达式可以出现在任何常量可以出现的地方

### 字符串常量
字符串常量指的是用双引号围起来的字符序列，比如说`"hello world"`

双引号内部允许没有字符：`""`

需要注意的一点是，双引号并不作为字符串的内容，只是告诉编译器这个被围起来的地方是字符串而已

那些在字符常量中使用的转义类型也可以使用在字符串中，比如说可以在字符串中使用`\"`来表示双引号

这有什么作用呢

举个例子：
```C
s = "He is a "dreamer".But I don't believe him"
```
上面的句子中，由于句子内部`dreamer`加了双引号导致了句子被错误切割为`He is a `和`.But I don't believe him`两部分

这时候便可以使用到字符常量来表示句子中的双引号：
``` C
s = "He is a \"dreamer\".But I don't believe him"
```
现在就是一个完整的句子了

在上一章中有提及到字符串的结束以`\0`为标志，这里便不多概述

需要补充的一点是，由于这个原因，C语言对字符串的大小并没有限制（因为无论如何都得在最后面加上`\0`作为结尾）

### 枚举常量
接下来是枚举常量，枚举是一个常数整型值的列表，一般用`enum`表示
``` C
enum boolean {NO, YES};
```
如果你没有进行显式声明那么`enum`的第一个值为0，之后第二个为1，第三个为3，以此类推

如果你只是制定了部分枚举名的值，那么那些为指定的会根据最后一个指定的值往后递增
``` C
enum WEEK {SUNDAY = 1, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY}
```
这样，往后的结果就会是：MONDAY = 2，TUESDAY = 3，以此类推

需要注意的是不同枚举中的名字必须互不相同，比如说不能出现多个`MONDAY`，但是同个枚举不同的名字可以指定同一个值

比如上面我可以指定全部的星期全为一，这样在用户输入星期的时候可以根据枚举的值的不同转换到不同的模块上

#### 补充点：#define 和 enum的不同
虽然说两者都可以让常量值和名字之间相关联，但是两者有一些不同

像是#define就没办法自动迭代，需要自己一个一个输入，并且你输入的常量值编译器是不检查是否存在问题的

但是enum会检查这种变量中储存得知是否为该枚举的有效值

另外，如果你尝试使用调试程序打印#define的值，就会发现会直接打印出对应的值，而不是值对应的名字

但是enum在调试中则会显示出这个值的名字，这也是为什么枚举会比较有优势